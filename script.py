import random
import re
import os

# random.range(0, 3) : 1~2
# random.choice(stat)

def make_script(pc_id):
    _script = ""
    _id = pc_id
    _house = profile[_id][0]
    _name = profile[_id][1]
    _surname = profile[_id][2]

    if _house == 'G': #ì´ë¦„
        _script += f'"í”„ë¡¬ì€ ì˜ ë³´ë‚´ê³  ìˆì–´, {_name}? ìˆì§€, ìŠ¬ë¦¬ë°ë¦° ì‚¬ê° êµìˆ˜ë‹˜ì´..." ë°œê±¸ìŒ ì†Œë¦¬ì— ë§ì´ ëŠê¸´ë‹¤.'
    elif _house == 'S': #ì„±
        _script += f'"ë‚´ê°€, ëˆ„êµ°ê°€í•œí…Œ, í¸ì§€ë¥¼ ì¼ë‹¤ëŠ” í—›ì†Œë¬¸ì´ ëŒë˜ë°. ë¬´ì‹œí•˜ë„ë¡."'
    elif _house == 'R': #ì´ë¦„
        _script += f'"ëˆ„ê°€ í›„í”Œí‘¸í”„ ì‚¬ê° êµìˆ˜ë‹˜í•œí…Œ ê³ ë°±í–ˆëŒ€... ì–´ì©œ ì¢‹ì•„, {_name}..."'
    elif _house == 'H': #ì„±
        _script += f'"ì´ ë‚˜ì´ ë¨¹ê³  ê²°íˆ¬ì¥ì„ ë°›ë‹¤ë‹ˆ. ì°¸, ì‚´ê³  ë³¼ ì¼ì¼ì„¸."'
    else:
        return 'ERR:01 @ellipsis'
    
    _script += f'\n\n{_name}ì—ê²Œ 1ê°ˆë ˆì˜¨ì´ ì§€ê¸‰ë©ë‹ˆë‹¤.'

    return _script


farming = [
    'í‹ˆìƒˆì—ì„œ ê°ˆë ˆì˜¨ì„ í•˜ë‚˜ ë°œê²¬í•©ë‹ˆë‹¤. ì•¼í˜¸. ê°ˆë ˆì˜¨ +1',
    'ì´ìƒí•œ ìƒìë¥¼ ì—´ì–´ ë³´ë©´... ê°ˆë ˆì˜¨ì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. ê°ˆë ˆì˜¨ +1',
    'ì²œ ì‚¬ì´ì— ì‹¸ì—¬ ìˆë˜ ê°ˆë ˆì˜¨ì„ í•˜ë‚˜ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ê°ˆë ˆì˜¨ +1',
    'ì´ê±´... í˜¸í´ëŸ¼í”„ ì¦™ì´êµ°ìš”. ì‹ ê¸°í•œ ê±¸ ì°¾ì•˜ìŠµë‹ˆë‹¤. í˜¸í´ëŸ¼í”„ ì¦™ +1',
    'ë³‘ì„ í•˜ë‚˜ ë°œê²¬í•©ë‹ˆë‹¤. ì•ˆì— ë“  ê±´... í˜¸í´ëŸ¼í”„ ì¦™ ê°™ë„¤ìš”. í˜¸í´ëŸ¼í”„ ì¦™ +1',
    'ì‹œì›í•œ ëƒ„ìƒˆê°€ ë‚©ë‹ˆë‹¤. ë°•í•˜ ìì„ í•˜ë‚˜ ì°¾ìŠµë‹ˆë‹¤. ë°•í•˜ ì +1',
    'ì •ì› ê°™ì€ êµ¬ì—­ì„ ë°œê²¬í•©ë‹ˆë‹¤. ë°•í•˜ ìì„ í•˜ë‚˜ ë•„ìŠµë‹ˆë‹¤. ë°•í•˜ ì +1',
    'ì´ìƒí•œ í„¸ì´ë„¤ìš”. ì–´ë””ì— ì“°ëŠ” ê±¸ê¹Œìš”? ê±°ë¯¸ í„¸ +1',
    'ì´ëŸ° ê²ƒë„ ë§ˆë²•ì•½ì— ì“°ì´ëŠ” ê±°ê² ì£ ? ê±°ë¯¸ í„¸ +1',
    'ë²½ì— í° ë²„ì„¯ì´ ìë¼ ìˆìŠµë‹ˆë‹¤. ì´ê±´... ë…ë²„ì„¯ ê°“ +1',
    'ë¬¼ê±´ ì‚¬ì´ì‚¬ì´ë¡œ í° ë²„ì„¯ì´ ë³´ì…ë‹ˆë‹¤. ë…ë²„ì„¯ ê°“ +1',
    'ë¬´ì–¸ê°€ ë‚ ì•„ë‹¤ë‹™ë‹ˆë‹¤... ì¡ì•˜ë‹¤! í’€ì ìë¦¬ +1',
    'ì´ê²ƒë„ í•„ìš”í• ê¹Œìš”? í•˜ì§€ë§Œ ì¡ì•˜ìŠµë‹ˆë‹¤. í’€ì ìë¦¬ +1',
    'ì‹ë¬¼ì´ ë‚œ êµ¬ì—­ì„ ë°œê²¬í•©ë‹ˆë‹¤. ë³´ë¦„ì´ˆ ì¤„ê¸° +1',
    'ìœ ë¦¬ë³‘ ì•ˆì— í’€ì´ ê°€ë“ ë‹´ê²¨ ìˆë„¤ìš”. ë³´ë¦„ì´ˆ ì¤„ê¸° +1'
]

def parse_string_to_dict(s: str) -> dict:
    pattern = re.findall(r'([a-zA-Z])(\d+)', s)  # ë¬¸ìì™€ ìˆ«ìë¥¼ ê·¸ë£¹í™”í•˜ì—¬ ì°¾ê¸°
    parsed_dict = dict((char, int(num)) for char, num in pattern)  # ëª…í™•í•œ dict ë³€í™˜
    return parsed_dict

def decimal_to_hex(decimal_number):
    return hex(int(decimal_number))[2:]

def hex_to_decimal(hex_string):
    return int(hex_string, 16)

def dict_to_hex_string(d):
    return ''.join(f"{key}{int(value)}" for key, value in sorted(d.items()))


def make_farming_script(pc_id, code):
    _script = ""
    _id = pc_id
    _code = decimal_to_hex(code) # 10ì§„ë²•ì„ 16ì§„ë²•ìœ¼ë¡œ ë³€í™˜

    _inventory = parse_string_to_dict(_code)

#    s = re.search(r"a/(.*?)\]", _code)
    
    _name = profile[_id][1]
    _ga = profile[_id][3]

    _script += f'{_name}{_ga} í•„ìš”ì˜ ë°©ì„ ë’¤ì ê±°ë¦½ë‹ˆë‹¤.\n\n'
    _farming = random.choice(farming)

    if 'í˜¸í´ëŸ¼í”„ ì¦™' in _farming:
        _inventory['a'] += 1
    elif 'ë°•í•˜ ì' in _farming:
        _inventory['b'] += 1
    elif 'ê±°ë¯¸ í„¸' in _farming:
        _inventory['c'] += 1
    elif 'ë…ë²„ì„¯ ê°“' in _farming:
        _inventory['d'] += 1
    elif 'í’€ì ìë¦¬' in _farming:
        _inventory['e'] += 1
    elif 'ë³´ë¦„ì´ˆ ì¤„ê¸°' in _farming:
        _inventory['f'] += 1

    _script += _farming

    _code = dict_to_hex_string(_inventory)
    _code = hex_to_decimal(_code)

    _script += f'\n\nì¸ë²¤í† ë¦¬ ì½”ë“œ: {_code}'

    return _script

store = [
    '"êµ¬ë§¤ ê³ ë§ˆì›Œ!" ì„ ë°°ê°€ ê°ˆë ˆì˜¨ì„ ì…‰ë‹ˆë‹¤.',
    '"ê·¼ë°, ê·¸ê±° ì–´ë””ì— ì“¸ ê±°ì•¼?" ì„ ë°°ê°€ ë¬»ìŠµë‹ˆë‹¤.',
    'ì„ ë°°ê°€ ë¬¼ê±´ì„ ë‚´ì–´ì¤ë‹ˆë‹¤. "ì´ê±¸ë¡œ ë‚´ ì¼í™•ì²œê¸ˆì˜ ê¿ˆìœ¼ë¡œ ë” ê°€ê¹Œì´..." ì¼í™•ì²œê¸ˆì€ ê·¸ëŸ° ëœ»ì´ ì•„ë‹ í…ë°?!',
    '"íœ´, ì–¼ë§ˆ ì „ì—” êµìˆ˜ë‹˜í•œí…Œ ë“¤í‚¬ ë»” í–ˆì–ì•„." ì„ ë°°ê°€ íˆ´íˆ´ëŒ‘ë‹ˆë‹¤.',
    '"ê°ì‚¬í•©ë‹ˆë‹¤, ê³ ê°ë‹˜! ì, ì—¬ê¹„ì–´."'
]

def make_store_script(pc_id, goods):
    _script = ""
    _id = pc_id
    _goods = goods
    
    _name = profile[_id][1]
    _ga = profile[_id][3]

    _script += f'{_name}{_ga} ìƒì ì—ì„œ ë¬¼ê±´ì„ ì‚½ë‹ˆë‹¤. {_goods}... ì–´ë””ì— ì¨ ë³¼ê¹Œìš”?\n\n'
    _script += random.choice(store)

    return _script


gacha = [
    'í¬ë„ì‚¬íƒ•', 'ìš© ëª¨ì–‘ ë¯¸ë‹ˆì–´ì²˜', '[ìš©ì‚¬ ì´ì•¼ê¸°]ë¼ëŠ” ì œëª©ì˜ ë™í™”ì±…', 'ë°˜ì§€', 'ëª©ê±¸ì´', 'ìŠ¤ì¹´í”„', 'ë¦¬ë³¸', 'ë‚˜ë¹„ ë¨¸ë¦¬í•€', 'ìƒˆ(bird) ì¸í˜•',
    'ì„¤íƒ• ê¹ƒíœ', 'í”¼ì§• ìœ„ì¦ˆë¹„', 'ë¹„ë²• ë…¸íŠ¸', 'ë“¤ê½ƒ', 'ì„¤íƒ•ì— ì ˆì¸ ì œë¹„ê½ƒ', 'ê°ì´ˆì‚¬íƒ•', 'ê°€ì§œ ì†', 'ë¬¼ê°', 'ì´ˆì½œë¦¿',
    'ë”¸ê¸° ì¼€ì´í¬', 'ë§Œë…„í•„', 'ì‰í¬', 'ì• í”Œì‹œë‚˜ëª¬íŒŒì´',
    'ì¿ í‚¤' 'í™”ë¶„' 'í°ìƒ‰ ê¹ƒíœ', 'ì„¤íƒ• ìº”ë””', 'ì†ê±°ìš¸', 'ì‹œíŠ¸ëŸ¬ìŠ¤ í–¥ í–¥ìˆ˜', 'ë ˆëª¬ì¼', 'í† ìŠ¤íŠ¸', 'ìƒˆ ëª¨í˜•',
    'ì†œì‚¬íƒ•', 'íŒŒë€ ë¦¬ë³¸', 'ë¯¸ë‹ˆ í”Œë¼ë„¤íƒ€ë¦¬ì›€', 'ì‚¬íƒ• ë‹¨ì§€', 'ê¿€ì„ ë„£ì€ íŒ¨ìŠ¤ì¸„ë¦¬', 'ë³‘ì•„ë¦¬ ì¸í˜•',
    'ë‘êº¼ìš´ ì±…' , 'ì†Œë¼ê»ë°ê¸°' , 'ë°˜ì§ì´ëŠ” ë³´ì„', 'ì†ìˆ˜ê±´', 'ë§Œë…„í•„', 'ì€í•˜ìˆ˜ ëª¨í˜•', 
    'ë“œë¦¼ìºì³', 'ì˜´ë‹ˆí˜ëŸ¬', 'ì›€ì§ì´ëŠ” ë™ë¬¼ ëª¨ì–‘ ì•¡ì…˜ í”¼ê²¨', 'í† ë§ˆí†  ì¹´í”„ë ˆì œ', 'ê³¨ë™í’ˆ ì‹œê³„' 'ìŠ¤ë…¸ìš° ë³¼',
    'ë§ˆì‹œë©œë¡œìš° í•«ì´ˆì½”','ì†ê¸° ê¹ƒíœ','ë‘êº¼ìš´ ë…¼ë¬¸ ì±…', 'ê·€ë§ˆê°œ', 'ì¸í˜•', 'ì»¤í”¼', 'í…Œì˜¤ë„ë¥´ ì¦ëª…ì‚¬ì§„' , 'ì‚¬ì§„ì²©' , 'ì‰í¬',
    'ìˆ˜ë¥´ìŠ¤íŠ¸ë¢°ë°', '[ë§ˆë²•ì‚¬ì— ëŒ€í•œ ê³ ì°°]ì´ë¼ëŠ” ì œëª©ì˜ ê¸€ì”¨ê°€ ë§ê³  ë‘êº¼ìš´ ì±…', 'ì‚¬íƒ• ëª¨ì–‘ ì¥ì‹í’ˆ',
    'íŒŒë¦¬ì±„', 'í•´ë©´ ìˆ˜ì„¸ë¯¸', 'ë²Œì–´ì§„ ì¹«ì†”', 'êµ¬í† ë§› ì ¤ë¦¬', 'ë§¤ìš´ ë§› ì‚¬íƒ•', 'ë¶€ë¶€ì ¤ë¼',
    'ì»¤í”¼', 'ê°ì´ˆ ë§› ì‚¬íƒ•', 'ë°”í€´ë²Œë ˆ ê³¼ì', 'êµ¬í† ë§› ì ¤ë¦¬', 'íšŒì´ˆë¦¬', 'ì¹¼',
    'ìƒëŸ¬ë“œ', 'ë°±ê³¼ì‚¬ì „',
    'ê°ì´ˆ ì‚¬íƒ•', 'ì •ì–´ë¦¬ íŒŒì´',
    'ë‹¹ê·¼ì ¤ë¦¬', 'íƒœì—½ì¸í˜•', 'ê°€ì‹­ì§€', 'ë¸”ë™ í‘¸ë”©', 'ì¡°í™”(é€ èŠ±)', 'ë‹¬íŒ½ì´',
    'ê¸ˆí™” ì´ˆì½œë¦¿', 'ëª¨ì¡° ë³´ì„', 'ì¸í…Œë¦¬ì–´ ì†Œí’ˆ', 'ê³¼ì œ', 'ì˜¤íŠ¸ë°€', 'ë£¨ë¹…ìŠ¤ íë¸Œ',
    'ê·€ì§€ë§› ì ¤ë¦¬', 'êµ¬í† ë§› ì ¤ë¦¬', 'ë¨¹ìŒì§ìŠ¤ëŸ¬ìš´ ê°€ì§œ ì‚¬íƒ•', 'ê±°ëŒ€ ë°”í€´ë²Œë ˆ ëª¨í˜•',
    'ë²Œë ˆ ëª¨í˜•', 'í‚¤ê°€ ì‘¥ì‘¥! ì„±ì¥ ë°œìœ¡ì œ', 'ê¹œì§ ìƒì', 'ì‹œë„ëŸ¬ìš´ ì¥ë‚œê°' , 'ë¯¸ì§€ê·¼í•œ ìš°ìœ ' , 'ì°¢ì–´ì§„ ì±…',
    'ê°ì´ˆì‚¬íƒ•', 'í•˜ìš¸ëŸ¬', 'ë§ˆë²•ì‚¬ ì²´ìŠ¤ì„¸íŠ¸', 'í™ ë§› ì ¤ë¦¬ë¹ˆ', 'í•˜ìš¸ëŸ¬', 'í­íƒ„ì¹´ë“œ',
    'ì„¤íƒ• ì¸„ëŸ¬ìŠ¤', 'ìºëŸ¬ë©œ' 'ë¶€ëŸ¬ì§„ ê¹ƒíœ', 'ë¡œë§¨ìŠ¤ ì†Œì„¤ì±…', 'ê±°ë¯¸ëª¨ì–‘ ì¥ë‚œê°','ì„¤íƒ• ê¹ƒíœ',
    'ìŠ¤ë‹ˆì¹˜', 'ë„¥íƒ€ì´', 'ì—°ì• í¸ì§€', 'ë±€ í—ˆë¬¼', 'ì©ì€ ë‹¬ê±€ ë§› ê°•ë‚­ì½© ì ¤ë¦¬', 'ì •ì–´ë¦¬'
]

def make_gacha_script(s):
    _script = ""
    _script += 'ëœë¤ë°•ìŠ¤ë¥¼ ì—´ë©´, ê·¸ ì•ˆì—ëŠ”...\n\n'
    for n in range(s):
        _script += 'ì§œì”! ' + random.choice(gacha) +'!\n'
    _script += '\në¬¼ë¡ , ì–´ë””ê¹Œì§€ë‚˜ ì¥ë‚œê°ì´ì§€ë§Œ!'

    return _script

def make_inventory_script(s):
    _script = ""
    _code = decimal_to_hex(s) # 10ì§„ë²•ì„ 16ì§„ë²•ìœ¼ë¡œ ë³€í™˜

    _inventory = parse_string_to_dict(_code)

    s = re.search(r"a/(.*?)\]", _code)
    

    _script += 'í˜„ì¬ ì†Œì§€ ì¬ë£Œ\n\n'
    _script += f'í˜¸í´ëŸ¼í”„ ì¦™: {_inventory['a']}\n'
    _script += f'ë°•í•˜ ì: {_inventory['b']}\n'
    _script += f'ê±°ë¯¸ í„¸: {_inventory['c']}\n'
    _script += f'ë…ë²„ì„¯ ê°“: {_inventory['d']}\n'
    _script += f'í’€ì ìë¦¬: {_inventory['e']}\n'
    _script += f'ë³´ë¦„ì´ˆ ì¤„ê¸°: {_inventory['f']}\n'

    return _script

def make_potion_script(s, potion):
    _script = ""
    _code = decimal_to_hex(s)  # 10ì§„ë²•ì„ 16ì§„ë²•ìœ¼ë¡œ ë³€í™˜
    _potion = potion

    print(f"ğŸ¯ ì›ë³¸ 10ì§„ìˆ˜ ì¸ë²¤í† ë¦¬ ì½”ë“œ: {s}")
    print(f"ğŸ¯ ë³€í™˜ëœ 16ì§„ìˆ˜ ì¸ë²¤í† ë¦¬ ì½”ë“œ: {_code}")

    _inventory = parse_string_to_dict(_code)

    print(f"ğŸ¯ 16ì§„ìˆ˜ë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë³€í™˜í•œ ê²°ê³¼: {_inventory}")

    _script += f'{_potion}, ë§Œë“¤ì–´ ë´…ì‹œë‹¤!\n\n'

    potion_requirements = {
        'ì•„ë¥´ë¶€ìŠ¤': {'a': 2, 'b': 1},
        'íŒŒì´ì œë…¼': {'e': 2, 'f': 1},
        'í´ë¦¬ì£¼ìŠ¤': {'b': 2, 'c': 1},
        'í‹°ë¥´ì†ŒìŠ¤': {'c': 2, 'd': 1},
        'ë¹„ì¦ˆë‘”': {'d': 2, 'e': 1},
        'ë©”ì´ê³ ë¥´': {'f': 2, 'a': 1}
    }

    if _potion not in potion_requirements:
        _script += 'í˜¹ì‹œ ë§ˆë²•ì•½ ì´ë¦„ì„ í‹€ë¦¬ì§„ ì•Šì•˜ì„ê¹Œ?'
        return _script

    requirements = potion_requirements[_potion]

    for ingredient, amount in requirements.items():
        if _inventory.get(ingredient, 0) < amount:
            _script += 'ì¬ë£Œê°€ ë¶€ì¡±í•´! ë‹¤ì‹œ í™•ì¸í•´ ë³´ì.'
            return _script

    for ingredient, amount in requirements.items():
        _inventory[ingredient] -= amount

    potion_effects = {
        'ì•„ë¥´ë¶€ìŠ¤': 'ì´ì œ ë‘¥ë‘¥ ë– ë‹¤ë‹ ìˆ˜ ìˆì–´!',
        'íŒŒì´ì œë…¼': 'ì´ê±¸ë¡œ ê³µë¶€ì˜ ì‹ ì´ ë˜ì.',
        'í´ë¦¬ì£¼ìŠ¤': 'ë¨¸ë¦¬ì¹´ë½ë§Œ ìŠ¬ì© í›”ì³ì˜¤ë©´ ë‚˜ë„...',
        'í‹°ë¥´ì†ŒìŠ¤': 'ì´ì œ ì¡¸ì•„ë„ ì•ˆ ë“¤í‚¨ë‹¤ê³ !',
        'ë¹„ì¦ˆë‘”': 'ì´ˆì½”ê°€ ì¢‹ì•„.',
        'ë©”ì´ê³ ë¥´': 'ì´ê±¸ë¡œ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì•¼!'
    }
    
    _script += potion_effects[_potion]

    _code = dict_to_hex_string(_inventory)
    print(f"ğŸ¯ ìˆ˜ì •ëœ ë”•ì…”ë„ˆë¦¬ë¥¼ 16ì§„ìˆ˜ë¡œ ë³€í™˜í•œ ê²°ê³¼: {_code}")

    _code = hex_to_decimal(_code)
    print(f"ğŸ¯ ìµœì¢…ì ìœ¼ë¡œ ë³€í™˜ëœ 10ì§„ìˆ˜ ì¸ë²¤í† ë¦¬ ì½”ë“œ: {_code}")

    _script += f'\n\nì¸ë²¤í† ë¦¬ ì½”ë“œ: {_code}'

    return _script



card = {
    'ì•„ë¼ë²¨ë¼': 'ë¹—ìë£¨',
    'íŠ¸ë£¨ë¨¼': 'ì§€íŒ¡ì´',
    'ë¦¬í‚¤': 'ë¹—ìë£¨',
    'í ë¦­ìŠ¤': 'ì§€íŒ¡ì´',
    'ë‹¤ì•„ì‹œ': 'ë¹—ìë£¨',
    'í…Œì˜¤ë„ë¥´': 'ì§€íŒ¡ì´',
    'ì—˜ë¦¬ì˜¤ë¥´': 'ë¹—ìë£¨',
    'ì—ì…€ë ˆë“œ': 'ì§€íŒ¡ì´',
    'ë¦¬ì•„íŠ¸ë¦¬ìŠ¤': 'ë¹—ìë£¨',
    'ë…¸ë¼': 'ì§€íŒ¡ì´',
    'ë²¤ìë¯¼': 'ë¹—ìë£¨',
    'ë‚˜ìƒ¤ë ›': 'ì§€íŒ¡ì´',
    'ì—ë¸”ë¦°': 'ë¹—ìë£¨',
    'ì´ì—”': 'ì§€íŒ¡ì´',
    'ëŸ¬ì…€': 'ë¹—ìë£¨',
    'ì£¼ë…¸': 'ì§€íŒ¡ì´',
    'ì—ë°€ë¦¬': 'ë¹—ìë£¨',
    'ì• ìŠˆí„´': 'ì§€íŒ¡ì´',
    'ì´ì‚¬ì•¼': 'ë¹—ìë£¨',
    'ë°‹ì¹˜': 'ì§€íŒ¡ì´',
    'ì¼': 'ë¹—ìë£¨',
    'ì•„ë‹ˆì¹´': 'ì§€íŒ¡ì´'
}

def make_hgsmd_change_script(s, id):
    _name = s
    _changer = profile[id][1]
    _script = 'ì„œë¡œ ì¹´ë“œë¥¼ ë°”ê¿‰ë‹ˆë‹¤. ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”?'

    save = card[_changer]
    card[_changer] = card[_name]
    card[_name] = save

    print(card)

    return _script

def make_hgsmd_result_script(s, id):
    _name = profile[id][1]
    _script = f'ì •ë‹µì€... {card[_name]}!\n\n'

    if s == card[_name]:
        _script += 'ì •ë‹µ! ì„ ë¬¼ì„ ë°›ì•„ê°€ì.\n\nìŠ¤í† ë¦¬ ê³„ì •ìœ¼ë¡œ ë©˜ì…˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.'
    else:
        _script += 'ì˜¤ë‹µ! ì•„ì‰½ê²Œ ëë‹¤... 1ê°ˆë ˆì˜¨ì„ íšë“í•©ë‹ˆë‹¤.'

    return _script
    

profile = {
    'Arabella': ['G', 'ì•„ë¼ë²¨ë¼', 'ì•„ë¼ë²¨ë¼', 'ê°€', 'ë¥¼'],
    'Truman_Adams': ['H', 'íŠ¸ë£¨ë¨¼', 'ì• ë¤ìŠ¤', 'ì´', 'ì„'],
    'Ricky': ['S', 'ë¦¬í‚¤', 'ì—ì–´ë“œ', 'ê°€', 'ë¥¼'],
    'FelixPB': ['S', 'í ë¦­ìŠ¤', 'ë² ë„·', 'ê°€', 'ë¥¼'],
    'DarcyIsm': ['G', 'ë‹¤ì•„ì‹œ', 'ì´ì¦ˆë©œ', 'ê°€', 'ë¥¼'],
    'TEO928': ['R', 'í…Œì˜¤ë„ë¥´', 'ëŸ¬ì…€', 'ê°€', 'ë¥¼'],
    'Elior': ['R', 'ì—˜ë¦¬ì˜¤ë¥´', 'í‹°ëª¨í…Œìš°ìŠ¤', 'ê°€', 'ë¥¼'],
    'Eddy_M': ['R', 'ì—ì…€ë ˆë“œ', 'ë¬´ì–´', 'ê°€', 'ë¥¼'],
    'psyche_lin': ['G', 'ë¦¬ì•„íŠ¸ë¦¬ìŠ¤', 'ìŠ¤ë…¸ìš°', 'ê°€', 'ë¥¼'],
    'NoraHolloway': ['H', 'ë…¸ë¼', 'í• ë¡œì›¨ì´', 'ê°€', 'ë¥¼'],
    '6enjqm1n22': ['H', 'ë²¤ìë¯¼', 'ë¡œí¬', 'ì´', 'ì„'],
    'nasaret': ['G', 'ë‚˜ìƒ¤ë ›', 'ë¸Œë§í´ë¦¬', 'ì´', 'ì„'],
    'Evelyn': ['R', 'ì—ë¸”ë¦°', 'í˜ë ˆì¦ˆ', 'ì´', 'ì„'],
    'En_L': ['H', 'ì´ì—”', 'ë ˆì¸', 'ì´', 'ì„'],
    '_RP_00': ['S', 'ëŸ¬ì…€', 'íŒ¨íŠ¸ë¦­', 'ì´', 'ì„'],
    'jono': ['R', 'ì£¼ë…¸', 'ë°”ë¸Œë ‰', 'ê°€', 'ë¥¼'],
    'EmilyLT': ['H', 'ì—ë°€ë¦¬', 'ë¡œë‘', 'ê°€', 'ë¥¼'],
    'AG': ['S', 'ì• ìŠˆí„´', 'ë§¤ë²„ë¦­', 'ì´', 'ì„'],
    'Isaiah_': ['R', 'ì´ì‚¬ì•¼', 'ì„œë¨¸ìŠ¤', 'ê°€', 'ë¥¼'],
    'Mitch': ['R', 'ë°‹ì¹˜', 'ë¦°ë„', 'ê°€', 'ë¥¼'],
    '3_lines': ['H', 'ì¼', 'ì»¤ìŠ¤ë²„íŠ¸ìŠ¨', 'ì´', 'ì„'],
    'anika': ['G', 'ì•„ë‹ˆì¹´', 'ë¦¬', 'ê°€', 'ë¥¼'],
    'mmm': ['S', 'ë¯¸ë§ˆìŠ¤', 'ëª¨ë§í„´', 'ê°€', 'ë¥¼'],
    'Camila' : ['S', 'ì¹´ë©œë¦¬ì•„', 'ìŠ¤ì¹¼ë ›', 'ê°€', 'ë¥¼'],
    'Serenity' : ['S', 'ì„¸ë ˆë‹ˆí‹°', 'ë§ˆë¥´í‹°ë„¤ì¦ˆ', 'ê°€', 'ë¥¼']
}


def get_random_image(folder):
    """í´ë”ì—ì„œ ëœë¤í•œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒ"""
    if not os.path.exists(folder):
        return None
    files = [f for f in os.listdir(folder) if f.lower().endswith(('png'))]
    return os.path.join(folder, random.choice(files)) if files else None

def generate_gacha_results():
    """ê°€ì±  ê²°ê³¼ 10ê°œ ìƒì„±"""
    results = []
    for _ in range(10):
        rand = random.random()
        if rand < 0.03:
            results.append(get_random_image("./5ì„±/"))  # 3% í™•ë¥ 
        elif rand < 0.13:
            results.append(get_random_image("./4ì„±/"))  # 10% í™•ë¥ 
        elif rand < 0.53:
            results.append(get_random_image("./3ì„±/"))  # 40% í™•ë¥ 
        else:
            results.append(random.choice(gacha))  # ë‚˜ë¨¸ì§€ í™•ë¥ 
    return results

def format_results(results):
    """ì´ë¯¸ì§€ ê°œìˆ˜ì— ë§ì¶° íˆ¿ì„ ë‚˜ëˆ„ëŠ” í•¨ìˆ˜"""
    tweet_batches = []
    current_batch = []
    
    for result in results:
        if isinstance(result, str):  # í…ìŠ¤íŠ¸ëŠ” ë”°ë¡œ ì €ì¥
            tweet_batches.append([result])
        else:
            current_batch.append(result)
            if len(current_batch) == 4:  # 4ê°œ ì´ë¯¸ì§€ë§ˆë‹¤ ìƒˆë¡œìš´ íˆ¿ ìƒì„±
                tweet_batches.append(current_batch)
                current_batch = []
    
    if current_batch:
        tweet_batches.append(current_batch)  # ë‚¨ì€ ì´ë¯¸ì§€ ì²˜ë¦¬
    
    return tweet_batches

